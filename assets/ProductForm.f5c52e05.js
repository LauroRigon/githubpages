import{r as V,Y,H as ee,L as xe,K as L,bi as T,bj as re,bk as se,bl as Z,a0 as y,J as O,M as te,$ as ke,g as Se,aK as qe,w as A,br as H,ah as k,o as We,a as b,bs as Be,bt as Ue,i as ae,F as oe,s as ue,ai as Xe,bu as Qe,aF as Ze,a1 as D,I as He,a2 as Ke,bo as Je,b8 as Ye}from"./index.0c1b9320.js";import{a as le,b as ce,P as de}from"./ProductModel.a6fb0bb7.js";import{_ as me}from"./BaseInput.91f80f75.js";import{a as he}from"./QMenu.795138f0.js";import{d as et}from"./QSelect.7759fa6b.js";import{a as fe,n as tt}from"./NotifyHelper.aabcb271.js";function it(i){const e=[];for(const t in i)e.push({label:i[t],value:t});return e}function nt(i){const e=V(i);function t(n,r){n||r(()=>{e.value=i}),r(()=>{const o=n.toLowerCase();e.value=i.filter(l=>l.label.toLowerCase().indexOf(o)>-1)})}return{handleFilterOptions:t,filteredOptions:e}}const rt=te(" Nenhum registro encontrado "),st={inheritAttrs:!1},at=Y({...st,__name:"BaseSelect",props:{options:null,errorMsg:null},setup(i){const e=i,{handleFilterOptions:t,filteredOptions:n}=nt(e.options);return(r,o)=>(ee(),xe(et,Z({outlined:"","use-input":"","hide-bottom-space":"","input-debounce":"0",onFilter:y(t)},r.$attrs,{options:y(n),"bottom-slots":!!i.errorMsg,error:!!i.errorMsg,"error-message":i.errorMsg}),{"no-option":L(l=>[T(r.$slots,"no-option",re(se(l)),()=>[O(he,{style:{"align-items":"center"}},{default:L(()=>[rt]),_:1})])]),option:L(l=>[T(r.$slots,"option",re(se(l)),()=>[O(he,Z(l.itemProps,{style:{"align-items":"center"}}),{default:L(()=>[te(ke(l.label),1)]),_:2},1040)])]),_:3},16,["onFilter","options","bottom-slots","error","error-message"]))}});function z(i){return typeof i=="function"}function K(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function q(i){return z(i.$validator)?Object.assign({},i):{$validator:i}}function Ve(i){return typeof i=="object"?i.$valid:i}function Ee(i){return i.$validator||i}function ot(i,e){if(!K(i))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof i}`);if(!K(e)&&!z(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=q(e);return t.$params=Object.assign({},t.$params||{},i),t}function ut(i,e){if(!z(i)&&typeof y(i)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof i}`);if(!K(e)&&!z(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=q(e);return t.$message=i,t}function lt(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=q(i);return Object.assign({},t,{$async:!0,$watchTargets:e})}function ct(i){return{$validator(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e).reduce((o,l,u)=>{const c=Object.entries(l).reduce((d,m)=>{let[a,p]=m;const h=i[a]||{},s=Object.entries(h).reduce((f,v)=>{let[g,S]=v;const E=Ee(S).call(this,p,l,u,...n),$=Ve(E);if(f.$data[g]=E,f.$data.$invalid=!$||!!f.$data.$invalid,f.$data.$error=f.$data.$invalid,!$){let R=S.$message||"";const I=S.$params||{};typeof R=="function"&&(R=R({$pending:!1,$invalid:!$,$params:I,$model:p,$response:E})),f.$errors.push({$property:a,$message:R,$params:I,$response:E,$model:p,$pending:!1,$validator:g})}return{$valid:f.$valid&&$,$data:f.$data,$errors:f.$errors}},{$valid:!0,$data:{},$errors:[]});return d.$data[a]=s.$data,d.$errors[a]=s.$errors,{$valid:d.$valid&&s.$valid,$data:d.$data,$errors:d.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:o.$valid&&c.$valid,$data:o.$data.concat(c.$data),$errors:o.$errors.concat(c.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:e=>{let{$response:t}=e;return t?t.$errors.map(n=>Object.values(n).map(r=>r.map(o=>o.$message)).reduce((r,o)=>r.concat(o),[])):[]}}}const ie=i=>{if(i=y(i),Array.isArray(i))return!!i.length;if(i==null)return!1;if(i===!1)return!0;if(i instanceof Date)return!isNaN(i.getTime());if(typeof i=="object"){for(let e in i)return!0;return!1}return!!String(i).length},dt=i=>(i=y(i),Array.isArray(i)?i.length:typeof i=="object"?Object.keys(i).length:String(i).length);function P(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return n=>(n=y(n),!ie(n)||e.every(r=>r.test(n)))}var mt=Object.freeze({__proto__:null,withParams:ot,withMessage:ut,withAsync:lt,forEach:ct,req:ie,len:dt,regex:P,unwrap:y,unwrapNormalizedValidator:Ee,unwrapValidatorResponse:Ve,normalizeValidatorObject:q});P(/^[a-zA-Z]*$/);P(/^[a-zA-Z0-9]*$/);P(/^\d*(\.\d+)?$/);const ht=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;P(ht);function ft(i){return typeof i=="string"&&(i=i.trim()),ie(i)}var gt={$validator:ft,$message:"Value is required",$params:{type:"required"}};const pt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;P(pt);P(/(^[0-9]*$)|(^-[0-9]+$)/);P(/^[-]?\d*(\.\d+)?$/);function ge(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(i).reduce((t,n)=>(e.includes(n)||(t[n]=y(i[n])),t),{})}function G(i){return typeof i=="function"}function vt(i){return Be(i)||Ue(i)}function Re(i,e,t){let n=i;const r=e.split(".");for(let o=0;o<r.length;o++){if(!n[r[o]])return t;n=n[r[o]]}return n}function X(i,e,t){return b(()=>i.some(n=>Re(e,n,{[t]:!1})[t]))}function pe(i,e,t){return b(()=>i.reduce((n,r)=>{const o=Re(e,r,{[t]:!1})[t]||[];return n.concat(o)},[]))}function De(i,e,t,n){return i.call(n,y(e),y(t),n)}function _e(i){return i.$valid!==void 0?!i.$valid:!i}function $t(i,e,t,n,r,o,l){let{$lazy:u,$rewardEarly:c}=r,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],m=arguments.length>8?arguments[8]:void 0,a=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0;const h=V(!!n.value),s=V(0);t.value=!1;const f=A([e,n].concat(d,p),()=>{if(u&&!n.value||c&&!a.value&&!t.value)return;let v;try{v=De(i,e,m,l)}catch(g){v=Promise.reject(g)}s.value++,t.value=!!s.value,h.value=!1,Promise.resolve(v).then(g=>{s.value--,t.value=!!s.value,o.value=g,h.value=_e(g)}).catch(g=>{s.value--,t.value=!!s.value,o.value=g,h.value=!0})},{immediate:!0,deep:typeof e=="object"});return{$invalid:h,$unwatch:f}}function yt(i,e,t,n,r,o,l,u){let{$lazy:c,$rewardEarly:d}=n;const m=()=>({}),a=b(()=>{if(c&&!t.value||d&&!u.value)return!1;let p=!0;try{const h=De(i,e,l,o);r.value=h,p=_e(h)}catch(h){r.value=h}return p});return{$unwatch:m,$invalid:a}}function bt(i,e,t,n,r,o,l,u,c,d,m){const a=V(!1),p=i.$params||{},h=V(null);let s,f;i.$async?{$invalid:s,$unwatch:f}=$t(i.$validator,e,a,t,n,h,r,i.$watchTargets,c,d,m):{$invalid:s,$unwatch:f}=yt(i.$validator,e,t,n,h,r,c,d);const v=i.$message;return{$message:G(v)?b(()=>v(ge({$pending:a,$invalid:s,$params:ge(p),$model:e,$response:h,$validator:o,$propertyPath:u,$property:l}))):v||"",$params:p,$pending:a,$invalid:s,$response:h,$unwatch:f}}function Ft(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=y(i),t=Object.keys(e),n={},r={},o={};let l=null;return t.forEach(u=>{const c=e[u];switch(!0){case G(c.$validator):n[u]=c;break;case G(c):n[u]={$validator:c};break;case u==="$validationGroups":l=c;break;case u.startsWith("$"):o[u]=c;break;default:r[u]=c}}),{rules:n,nestedValidators:r,config:o,validationGroups:l}}function xt(){}const St="__root";function Oe(i,e,t){if(t)return e?e(i()):i();try{var n=Promise.resolve(i());return e?n.then(e):n}catch(r){return Promise.reject(r)}}function Vt(i,e){return Oe(i,xt,e)}function Et(i,e){var t=i();return t&&t.then?t.then(e):e(t)}function Rt(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}function Dt(i,e,t,n,r,o,l,u,c){const d=Object.keys(i),m=n.get(r,i),a=V(!1),p=V(!1),h=V(0);if(m){if(!m.$partial)return m;m.$unwatch(),a.value=m.$dirty.value}const s={$dirty:a,$path:r,$touch:()=>{a.value||(a.value=!0)},$reset:()=>{a.value&&(a.value=!1)},$commit:()=>{}};return d.length?(d.forEach(f=>{s[f]=bt(i[f],e,s.$dirty,o,l,f,t,r,c,p,h)}),s.$externalResults=b(()=>u.value?[].concat(u.value).map((f,v)=>({$propertyPath:r,$property:t,$validator:"$externalResults",$uid:`${r}-externalResult-${v}`,$message:f,$params:{},$response:null,$pending:!1})):[]),s.$invalid=b(()=>{const f=d.some(v=>y(s[v].$invalid));return p.value=f,!!s.$externalResults.value.length||f}),s.$pending=b(()=>d.some(f=>y(s[f].$pending))),s.$error=b(()=>s.$dirty.value?s.$pending.value||s.$invalid.value:!1),s.$silentErrors=b(()=>d.filter(f=>y(s[f].$invalid)).map(f=>{const v=s[f];return k({$propertyPath:r,$property:t,$validator:f,$uid:`${r}-${f}`,$message:v.$message,$params:v.$params,$response:v.$response,$pending:v.$pending})}).concat(s.$externalResults.value)),s.$errors=b(()=>s.$dirty.value?s.$silentErrors.value:[]),s.$unwatch=()=>d.forEach(f=>{s[f].$unwatch()}),s.$commit=()=>{p.value=!0,h.value=Date.now()},n.set(r,i,s),s):(m&&n.set(r,i,s),s)}function _t(i,e,t,n,r,o,l){const u=Object.keys(i);return u.length?u.reduce((c,d)=>(c[d]=J({validations:i[d],state:e,key:d,parentKey:t,resultsCache:n,globalConfig:r,instance:o,externalResults:l}),c),{}):{}}function Ot(i,e,t){const n=b(()=>[e,t].filter(s=>s).reduce((s,f)=>s.concat(Object.values(y(f))),[])),r=b({get(){return i.$dirty.value||(n.value.length?n.value.every(s=>s.$dirty):!1)},set(s){i.$dirty.value=s}}),o=b(()=>{const s=y(i.$silentErrors)||[],f=n.value.filter(v=>(y(v).$silentErrors||[]).length).reduce((v,g)=>v.concat(...g.$silentErrors),[]);return s.concat(f)}),l=b(()=>{const s=y(i.$errors)||[],f=n.value.filter(v=>(y(v).$errors||[]).length).reduce((v,g)=>v.concat(...g.$errors),[]);return s.concat(f)}),u=b(()=>n.value.some(s=>s.$invalid)||y(i.$invalid)||!1),c=b(()=>n.value.some(s=>y(s.$pending))||y(i.$pending)||!1),d=b(()=>n.value.some(s=>s.$dirty)||n.value.some(s=>s.$anyDirty)||r.value),m=b(()=>r.value?c.value||u.value:!1),a=()=>{i.$touch(),n.value.forEach(s=>{s.$touch()})},p=()=>{i.$commit(),n.value.forEach(s=>{s.$commit()})},h=()=>{i.$reset(),n.value.forEach(s=>{s.$reset()})};return n.value.length&&n.value.every(s=>s.$dirty)&&a(),{$dirty:r,$errors:l,$invalid:u,$anyDirty:d,$error:m,$pending:c,$touch:a,$reset:h,$silentErrors:o,$commit:p}}function J(i){const e=Rt(function(){return U(),Et(function(){if(v.$rewardEarly)return ne(),Vt(ue)},function(){return Oe(ue,function(){return new Promise(F=>{if(!B.value)return F(!W.value);const C=A(B,()=>{F(!W.value),C()})})})})});let{validations:t,state:n,key:r,parentKey:o,childResults:l,resultsCache:u,globalConfig:c={},instance:d,externalResults:m}=i;const a=o?`${o}.${r}`:r,{rules:p,nestedValidators:h,config:s,validationGroups:f}=Ft(t),v=Object.assign({},c,s),g=r?b(()=>{const F=y(n);return F?y(F[r]):void 0}):n,S=Object.assign({},y(m)||{}),x=b(()=>{const F=y(m);return r?F?y(F[r]):void 0:F}),E=Dt(p,g,r,u,a,v,d,x,n),$=_t(h,g,a,u,v,d,x),R={};f&&Object.entries(f).forEach(F=>{let[C,_]=F;R[C]={$invalid:X(_,$,"$invalid"),$error:X(_,$,"$error"),$pending:X(_,$,"$pending"),$errors:pe(_,$,"$errors"),$silentErrors:pe(_,$,"$silentErrors")}});const{$dirty:I,$errors:Le,$invalid:W,$anyDirty:Ae,$error:Ie,$pending:B,$touch:U,$reset:Me,$silentErrors:Ne,$commit:ne}=Ot(E,$,l),Te=r?b({get:()=>y(g),set:F=>{I.value=!0;const C=y(n),_=y(m);_&&(_[r]=S[r]),H(C[r])?C[r].value=F:C[r]=F}}):null;r&&v.$autoDirty&&A(g,()=>{I.value||U();const F=y(m);F&&(F[r]=S[r])},{flush:"sync"});function ze(F){return(l.value||{})[F]}function Ge(){H(m)?m.value=S:Object.keys(S).length===0?Object.keys(m).forEach(F=>{delete m[F]}):Object.assign(m,S)}return k(Object.assign({},E,{$model:Te,$dirty:I,$error:Ie,$errors:Le,$invalid:W,$anyDirty:Ae,$pending:B,$touch:U,$reset:Me,$path:a||St,$silentErrors:Ne,$validate:e,$commit:ne},l&&{$getResultsForChild:ze,$clearExternalResults:Ge,$validationGroups:R},$))}class wt{constructor(){this.storage=new Map}set(e,t,n){this.storage.set(e,{rules:t,result:n})}checkRulesValidity(e,t,n){const r=Object.keys(n),o=Object.keys(t);return o.length!==r.length||!o.every(u=>r.includes(u))?!1:o.every(u=>t[u].$params?Object.keys(t[u].$params).every(c=>y(n[u].$params[c])===y(t[u].$params[c])):!0)}get(e,t){const n=this.storage.get(e);if(!n)return;const{rules:r,result:o}=n,l=this.checkRulesValidity(e,t,r),u=o.$unwatch?o.$unwatch:()=>({});return l?o:{$dirty:o.$dirty,$partial:!0,$unwatch:u}}}const M={COLLECT_ALL:!0,COLLECT_NONE:!1},ve=Symbol("vuelidate#injectChildResults"),$e=Symbol("vuelidate#removeChildResults");function Pt(i){let{$scope:e,instance:t}=i;const n={},r=V([]),o=b(()=>r.value.reduce((m,a)=>(m[a]=y(n[a]),m),{}));function l(m,a){let{$registerAs:p,$scope:h,$stopPropagation:s}=a;s||e===M.COLLECT_NONE||h===M.COLLECT_NONE||e!==M.COLLECT_ALL&&e!==h||(n[p]=m,r.value.push(p))}t.__vuelidateInjectInstances=[].concat(t.__vuelidateInjectInstances||[],l);function u(m){r.value=r.value.filter(a=>a!==m),delete n[m]}t.__vuelidateRemoveInstances=[].concat(t.__vuelidateRemoveInstances||[],u);const c=ae(ve,[]);oe(ve,t.__vuelidateInjectInstances);const d=ae($e,[]);return oe($e,t.__vuelidateRemoveInstances),{childResults:o,sendValidationResultsToParent:c,removeValidationResultsFromParent:d}}function we(i){return new Proxy(i,{get(e,t){return typeof e[t]=="object"?we(e[t]):b(()=>e[t])}})}let ye=0;function Ct(i,e){var t;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(n=i,i=void 0,e=void 0);let{$registerAs:r,$scope:o=M.COLLECT_ALL,$stopPropagation:l,$externalResults:u,currentVueInstance:c}=n;const d=c||((t=Se())===null||t===void 0?void 0:t.proxy),m=d?d.$options:{};r||(ye+=1,r=`_vuelidate_${ye}`);const a=V({}),p=new wt,{childResults:h,sendValidationResultsToParent:s,removeValidationResultsFromParent:f}=d?Pt({$scope:o,instance:d}):{childResults:V({})};if(!i&&m.validations){const v=m.validations;e=V({}),qe(()=>{e.value=d,A(()=>G(v)?v.call(e.value,new we(e.value)):v,g=>{a.value=J({validations:g,state:e,childResults:h,resultsCache:p,globalConfig:n,instance:d,externalResults:u||d.vuelidateExternalResults})},{immediate:!0})}),n=m.validationsConfig||n}else{const v=H(i)||vt(i)?i:k(i||{});A(v,g=>{a.value=J({validations:g,state:e,childResults:h,resultsCache:p,globalConfig:n,instance:d!=null?d:{},externalResults:u})},{immediate:!0})}return d&&(s.forEach(v=>v(a,{$registerAs:r,$scope:o,$stopPropagation:l})),We(()=>f.forEach(v=>v(r)))),b(()=>Object.assign({},y(a.value),h.value))}/**
 * Vue Currency Input 2.4.0
 * (c) 2018-2022 Matthias Stiller
 * @license MIT
 */const N=i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Pe=i=>i.replace(/^0+(0$|[^0])/,"$1"),Q=(i,e)=>(i.match(new RegExp(N(e),"g"))||[]).length,jt=(i,e)=>i.substring(0,i.indexOf(e));var w;(function(i){i.symbol="symbol",i.narrowSymbol="narrowSymbol",i.code="code",i.name="name",i.hidden="hidden"})(w||(w={}));var j;(function(i){i.precision="precision",i.thousands="thousands",i.millions="millions",i.billions="billions"})(j||(j={}));const Ce=[",",".","\u066B"],be="(0|[1-9]\\d*)";class Lt{constructor(e){var t,n,r,o,l,u;const{currency:c,currencyDisplay:d,locale:m,precision:a,accountingSign:p}=e;this.locale=m,this.options={style:"currency",currency:c,currencySign:p?"accounting":void 0,currencyDisplay:d!==w.hidden?d:void 0};const h=new Intl.NumberFormat(m,this.options),s=h.formatToParts(123456);this.currency=(t=s.find(({type:g})=>g==="currency"))===null||t===void 0?void 0:t.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(g=>g.toLocaleString(m)),this.decimalSymbol=(n=s.find(({type:g})=>g==="decimal"))===null||n===void 0?void 0:n.value,this.groupingSymbol=(r=s.find(({type:g})=>g==="group"))===null||r===void 0?void 0:r.value,this.minusSign=(o=h.formatToParts(-1).find(({type:g})=>g==="minusSign"))===null||o===void 0?void 0:o.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof a=="number"?this.minimumFractionDigits=this.maximumFractionDigits=a:(this.minimumFractionDigits=(l=a==null?void 0:a.min)!==null&&l!==void 0?l:h.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(u=a==null?void 0:a.max)!==null&&u!==void 0?u:h.resolvedOptions().maximumFractionDigits);const f=g=>jt(g,this.digits[1]),v=g=>g.substring(g.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=f(h.format(1)),this.suffix=v(h.format(1)),this.negativePrefix=f(h.format(-1)),this.negativeSuffix=v(h.format(-1))}parse(e){if(e){const t=this.isNegative(e);e=this.normalizeDigits(e),e=this.stripCurrency(e,t),e=this.stripSignLiterals(e);const n=this.decimalSymbol?`(?:${N(this.decimalSymbol)}(\\d*))?`:"",r=this.stripGroupingSeparator(e).match(new RegExp(`^${be}${n}$`));if(r&&this.isValidIntegerFormat(this.decimalSymbol?e.split(this.decimalSymbol)[0]:e,Number(r[1])))return Number(`${t?"-":""}${this.onlyDigits(r[1])}.${this.onlyDigits(r[2]||"")}`)}return null}isValidIntegerFormat(e,t){const n={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...n,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...n,useGrouping:!1})),!1)].includes(e)}format(e,t={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return e!=null?e.toLocaleString(this.locale,{...this.options,...t}):""}toFraction(e){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(e.substr(1)).substr(0,this.maximumFractionDigits)}`}isFractionIncomplete(e){return!!this.normalizeDigits(this.stripGroupingSeparator(e)).match(new RegExp(`^${be}${N(this.decimalSymbol)}$`))}isNegative(e){return e.startsWith(this.negativePrefix)||this.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))||this.minusSign!==void 0&&e.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(e,t){return`${t?this.negativePrefix:this.prefix}${e}${t?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(e){return this.groupingSymbol!==void 0?e.replace(new RegExp(N(this.groupingSymbol),"g"),""):e}stripSignLiterals(e){return this.minusSign!==void 0?e.replace("-",this.minusSign).replace(this.minusSign,""):e.replace(/[-()]/g,"")}stripCurrency(e,t){return e.replace(t?this.negativePrefix:this.prefix,"").replace(t?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(e,t){return Ce.forEach(n=>{e=e.substr(0,t)+e.substr(t).replace(n,this.decimalSymbol)}),e}normalizeDigits(e){return this.digits[0]!=="0"&&this.digits.forEach((t,n)=>{e=e.replace(new RegExp(t,"g"),String(n))}),e}onlyDigits(e){return this.normalizeDigits(e).replace(/\D+/g,"")}onlyLocaleDigits(e){return e.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class je{constructor(e){this.currencyFormat=e}}class At extends je{conformToMask(e,t=""){const n=this.currencyFormat.isNegative(e),r=s=>s===""&&n&&!(this.currencyFormat.minusSign===void 0?t===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:t===this.currencyFormat.negativePrefix),o=s=>{if(r(s))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(s))return s;if(s.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(s)}return null};let l=e;l=this.currencyFormat.stripCurrency(l,n),l=this.currencyFormat.stripSignLiterals(l);const u=o(l);if(u!=null)return this.currencyFormat.insertCurrency(u,n);const[c,...d]=l.split(this.currencyFormat.decimalSymbol),m=Pe(this.currencyFormat.onlyDigits(c)),a=this.currencyFormat.onlyDigits(d.join("")).substr(0,this.currencyFormat.maximumFractionDigits),p=d.length>0&&a.length===0,h=m===""&&n&&(this.currencyFormat.minusSign===void 0?t===e.slice(0,-2)+this.currencyFormat.negativeSuffix:t===e.slice(0,-1));return p||h||r(m)?t:m.match(/\d+/)?{numberValue:Number(`${n?"-":""}${m}.${a}`),fractionDigits:a}:""}}class It extends je{conformToMask(e,t=""){if(e===""||this.currencyFormat.parse(t)===0&&this.currencyFormat.stripCurrency(t,!0).slice(0,-1)===this.currencyFormat.stripCurrency(e,!0))return"";const n=this.currencyFormat.isNegative(e),r=this.currencyFormat.stripSignLiterals(e)===""?-0:Number(`${n?"-":""}${Pe(this.currencyFormat.onlyDigits(e))}`)/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:r,fractionDigits:r.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const Mt={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:!0,valueScaling:void 0};class Nt{constructor(e,t){this.el=e,this.numberValue=null,this.addEventListener(),this.init(t),this.setValue(this.currencyFormat.parse(this.el.value))}setOptions(e){this.init(e),this.applyFixedFractionFormat(this.numberValue,!0)}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(e){const t=this.valueScaling!==void 0&&e!=null?this.toFloat(e,this.valueScaling):e;t!==this.numberValue&&this.applyFixedFractionFormat(t)}dispatchEvent(e){this.el.dispatchEvent(new CustomEvent(e,{detail:this.getValue()}))}init(e){this.options={...Mt,...e},this.options.autoDecimalDigits?(this.options.hideNegligibleDecimalDigitsOnFocus=!1,this.el.setAttribute("inputmode","numeric")):this.el.setAttribute("inputmode","decimal"),this.currencyFormat=new Lt(this.options),this.numberMask=this.options.autoDecimalDigits?new It(this.currencyFormat):new At(this.currencyFormat);const t={[j.precision]:this.currencyFormat.maximumFractionDigits,[j.thousands]:3,[j.millions]:6,[j.billions]:9};this.valueScaling=this.options.valueScaling?t[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==j.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var e,t;let n=this.toFloat(-Number.MAX_SAFE_INTEGER);return((e=this.options.valueRange)===null||e===void 0?void 0:e.min)!==void 0&&(n=Math.max((t=this.options.valueRange)===null||t===void 0?void 0:t.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),n}getMaxValue(){var e,t;let n=this.toFloat(Number.MAX_SAFE_INTEGER);return((e=this.options.valueRange)===null||e===void 0?void 0:e.max)!==void 0&&(n=Math.min((t=this.options.valueRange)===null||t===void 0?void 0:t.max,this.toFloat(Number.MAX_SAFE_INTEGER))),n}toFloat(e,t){return e/Math.pow(10,t!=null?t:this.valueScalingFractionDigits)}toInteger(e,t){return Number(e.toFixed(t!=null?t:this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(e){return e!=null?Math.min(Math.max(e,this.minValue),this.maxValue):e}applyFixedFractionFormat(e,t=!1){this.format(this.currencyFormat.format(this.validateValueRange(e))),(e!==this.numberValue||t)&&this.dispatchEvent("change")}format(e,t=!1){if(e!=null){this.decimalSymbolInsertedAt!==void 0&&(e=this.currencyFormat.normalizeDecimalSeparator(e,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const n=this.numberMask.conformToMask(e,this.formattedValue);let r;if(typeof n=="object"){const{numberValue:o,fractionDigits:l}=n;let{maximumFractionDigits:u,minimumFractionDigits:c}=this.currencyFormat;this.focus?c=t?l.replace(/0+$/,"").length:Math.min(u,l.length):Number.isInteger(o)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||c===0)&&(c=u=0),r=this.toInteger(Math.abs(o))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(o,{useGrouping:this.options.useGrouping&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:c,maximumFractionDigits:u})}else r=n;this.maxValue<=0&&!this.currencyFormat.isNegative(r)&&this.currencyFormat.parse(r)!==0&&(r=r.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(r=r.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===w.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(r=r.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=r,this.numberValue=this.currencyFormat.parse(r)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.dispatchEvent("input")}addEventListener(){this.el.addEventListener("input",e=>{if(!e.detail){const{value:t,selectionStart:n}=this.el,r=e;if(n&&r.data&&Ce.includes(r.data)&&(this.decimalSymbolInsertedAt=n-1),this.format(t),this.focus&&n!=null){const o=()=>{const{prefix:l,suffix:u,decimalSymbol:c,maximumFractionDigits:d,groupingSymbol:m}=this.currencyFormat;let a=t.length-n;const p=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))&&!t.endsWith(")"))return p-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(n).length:1;if(this.formattedValue.substr(n,1)===m&&Q(this.formattedValue,m)===Q(t,m)+1)return p-a-1;if(p<a)return n;if(c!==void 0&&t.indexOf(c)!==-1){const h=t.indexOf(c)+1;if(Math.abs(p-t.length)>1&&n<=h)return this.formattedValue.indexOf(c)+1;!this.options.autoDecimalDigits&&n>h&&this.currencyFormat.onlyDigits(t.substr(h)).length-1===d&&(a-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===w.hidden?p-a:Math.max(p-Math.max(a,u.length),l.length)};this.setCaretPosition(o())}}},{capture:!0}),this.el.addEventListener("focus",()=>{this.focus=!0,setTimeout(()=>{const{value:e,selectionStart:t,selectionEnd:n}=this.el;if(this.format(e,this.options.hideNegligibleDecimalDigitsOnFocus),t!=null&&n!=null&&Math.abs(t-n)>0)this.setCaretPosition(0,this.el.value.length);else if(t!=null){const r=this.getCaretPositionOnFocus(e,t);this.setCaretPosition(r)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.applyFixedFractionFormat(this.numberValue)}),this.el.addEventListener("change",e=>{e.detail||this.dispatchEvent("change")},{capture:!0})}getCaretPositionOnFocus(e,t){if(this.numberValue==null)return t;const{prefix:n,negativePrefix:r,suffix:o,negativeSuffix:l,groupingSymbol:u,currency:c}=this.currencyFormat,d=this.numberValue<0,m=d?r:n,a=m.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===w.hidden){if(d){if(t<=1)return 1;if(e.endsWith(")")&&t>e.indexOf(")"))return this.formattedValue.length-1}}else{const h=d?l.length:o.length;if(t>=e.length-h)return this.formattedValue.length-h;if(t<a)return a}let p=t;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==w.hidden&&t>=a&&c!==void 0&&m.includes(c)&&(p-=a,d&&(p+=1)),this.options.hideGroupingSeparatorOnFocus&&u!==void 0&&(p-=Q(e.substring(0,t),u)),p}setCaretPosition(e,t=e){this.el.setSelectionRange(e,t)}}const Tt=i=>i!=null&&i.matches("input")?i:i==null?void 0:i.querySelector("input");var zt=(i,e)=>{var t,n,r,o;let l,u;const c=V(null),d=V(null),m=V(null),a=Se(),p=(a==null?void 0:a.emit)||((n=(t=a==null?void 0:a.proxy)===null||t===void 0?void 0:t.$emit)===null||n===void 0?void 0:n.bind(a==null?void 0:a.proxy)),h=(a==null?void 0:a.props)||((r=a==null?void 0:a.proxy)===null||r===void 0?void 0:r.$props),s=Qe.startsWith("3"),f=s&&((o=a==null?void 0:a.attrs.modelModifiers)===null||o===void 0?void 0:o.lazy),v=b(()=>h==null?void 0:h[s?"modelValue":"value"]),g=s?"update:modelValue":"input",S=f?"update:modelValue":"change",x=$=>{$.detail&&(!f&&e!==!1&&v.value!==$.detail.number&&(p==null||p(g,$.detail.number)),m.value=$.detail.number,d.value=$.detail.formatted)},E=$=>{$.detail&&(p==null||p(S,$.detail.number))};return A(c,$=>{var R;$?(u=Tt((R=$==null?void 0:$.$el)!==null&&R!==void 0?R:$),u?(u.addEventListener("input",x),u.addEventListener("change",E),l=new Nt(u,i),l.setValue(v.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')):l=null}),Xe(()=>{u==null||u.removeEventListener("input",x),u==null||u.removeEventListener("change",E)}),{inputRef:c,numberValue:m,formattedValue:d,setValue:$=>l==null?void 0:l.setValue($),setOptions:$=>l==null?void 0:l.setOptions($)}};const Gt=D("span",null,"R$",-1),kt={inheritAttrs:!1},Fe=Y({...kt,__name:"InputMoney",props:{errorMsg:null,modelValue:null},emits:["update:modelValue"],setup(i){const e=i,{inputRef:t,formattedValue:n,setValue:r}=zt({currency:"BRL",currencyDisplay:w.hidden,precision:2,hideCurrencySymbolOnFocus:!0,hideGroupingSeparatorOnFocus:!1,hideNegligibleDecimalDigitsOnFocus:!1,autoDecimalDigits:!0,useGrouping:!0,accountingSign:!1});return A(()=>e.modelValue,o=>{r(o)}),(o,l)=>(ee(),xe(Ze,Z({outlined:"","hide-bottom-space":"",error:!!i.errorMsg,"error-message":i.errorMsg},o.$attrs,{"model-value":y(n),ref_key:"inputRef",ref:t}),{prepend:L(()=>[T(o.$slots,"prepend",{},()=>[Gt])]),append:L(()=>[T(o.$slots,"append")]),_:3},16,["error","error-message","model-value"]))}}),qt=["onSubmit"],Wt={class:"row q-py-sm"},Bt={class:"col"},Ut={class:"row q-py-sm"},Xt={class:"col"},Qt={class:"row q-py-sm q-col-gutter-sm"},Zt={class:"col"},Ht={class:"row q-py-sm q-col-gutter-sm"},Kt={class:"col col-md-6"},Jt={class:"col col-md-6"},Yt=te(" Salvar "),ai=Y({__name:"ProductForm",props:{id:null,initialFormData:null},emits:["submiting","error","success"],setup(i,{emit:e}){var m,a,p,h,s,f;const t=i,n=k({name:((m=t.initialFormData)==null?void 0:m.name)||"",description:((a=t.initialFormData)==null?void 0:a.description)||"",type:{label:le[((p=t.initialFormData)==null?void 0:p.type)||ce.PRODUCT],value:((h=t.initialFormData)==null?void 0:h.type)||ce.PRODUCT},cost:((s=t.initialFormData)==null?void 0:s.cost)||null,price:((f=t.initialFormData)==null?void 0:f.price)||null}),r=it(le),o=mt.withMessage("Campo obrigat\xF3rio",gt),u=Ct({name:{requiredWithMessage:o},type:{requiredWithMessage:o},price:{requiredWithMessage:o}},n),c=V(!1);async function d(){var S;if(u.value.$touch(),!await u.value.$validate())return;const g={name:n.name,description:n.description,type:(S=n.type)==null?void 0:S.value,cost:n.cost,price:n.price};try{c.value=!0;let x=null;t.id?(x=await de.update(t.id,g),fe("Produto atualizado com sucesso")):(x=await de.create(g),fe("Produto cadastrado com sucesso")),e("success",x)}catch(x){if(!Ye.isAxiosError(x))throw x;tt(x.response&&x.response.data.message)}finally{c.value=!1}}return(v,g)=>{var S,x,E;return ee(),He("form",{onSubmit:Je(d,["prevent"])},[D("div",Wt,[D("div",Bt,[O(me,{label:"Nome","model-value":n.name,"onUpdate:model-value":g[0]||(g[0]=$=>n.name=$),"error-msg":(S=y(u).name.$errors[0])==null?void 0:S.$message},null,8,["model-value","error-msg"])])]),D("div",Ut,[D("div",Xt,[O(me,{label:"Descri\xE7\xE3o",type:"textarea",placeholder:"Descreva o produto","model-value":n.description,"onUpdate:model-value":g[1]||(g[1]=$=>n.description=$)},null,8,["model-value"])])]),D("div",Qt,[D("div",Zt,[O(at,{label:"Tipo","model-value":n.type,"onUpdate:model-value":g[2]||(g[2]=$=>n.type=$),options:y(r),"error-msg":(x=y(u).type.$errors[0])==null?void 0:x.$message},null,8,["model-value","options","error-msg"])])]),D("div",Ht,[D("div",Kt,[O(Fe,{label:"Custo",modelValue:n.cost,"onUpdate:modelValue":g[3]||(g[3]=$=>n.cost=$)},null,8,["modelValue"])]),D("div",Jt,[O(Fe,{label:"Pre\xE7o",modelValue:n.price,"onUpdate:modelValue":g[4]||(g[4]=$=>n.price=$),"error-msg":(E=y(u).name.$errors[0])==null?void 0:E.$message},null,8,["modelValue","error-msg"])])]),O(Ke,{color:"primary",type:"submit",loading:c.value,disable:c.value},{default:L(()=>[Yt]),_:1},8,["loading","disable"])],40,qt)}}});export{at as _,Ct as a,Fe as b,mt as c,ai as d,gt as r,it as u};
